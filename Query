drop table book;

CREATE TABLE book(
                      book_id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
                      name varchar(200) NOT NULL,
                      author varchar(200) NOT NULL,
                      year int CHECK(year > 0) NOT NULL,
                      person_id int REFERENCES person(person_id) on DELETE SET NULL
);

select * from book;

INSERT INTO book(name, author, year) VALUES ('Над пропастью во ржи', 'Джером Сэлинджер', 1951);
INSERT INTO book(name, author, year) VALUES ('День опричника', 'Владимир Сорокин', 2006);
INSERT INTO book(name, author, year) VALUES ('Тайные виды на гору Фудзи', 'Владимир Пелевин', 2018);


SELECT book_id, book.name, book.author, book.year, book.person_id FROM person JOIN book ON person.person_id = book.person_id Where book.person_id =1;


INSERT INTO book(name, author, year) VALUES ('Тайные виды на гору Фудзи', 'Владимир Пелевин', 2018);